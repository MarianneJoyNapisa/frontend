@page
@model HomeownersMS.Pages_Billings_Payments.PaymentsModel
@{
    Layout = "_ResidentLayout"; // Use your layout file
    ViewData["HeaderTitle"] = "Billing and Payment";
    ViewData["Title"] = "Billings and Payments";
    var username = HttpContext?.User?.Identity?.Name ?? "Guest";
    var currentPage = ViewContext.RouteData.Values["page"]?.ToString();
    ViewData["Username"] = username;
    ViewData["CurrentPage"] = currentPage;
}

    <div class="row justify-content-center">
        <div class="col-md-12 col-lg-10">
            <!-- Top Section: Outstanding Fees and Payment Details -->
            <div class="row mb-4">
                <!-- Left Column: Outstanding Fees and Service/Booking Fees -->
                <div class="col-md-7"> <!-- Increased width for tables -->
                    <!-- Outstanding Fees/Dues Table -->
                    <p class="fs-5 mb-1">Outstanding Fees/Dues</p>
                    <div class="table-responsive mb-4">
                        <table class="table table-striped fee-table">
                            <thead>
                                <tr>
                                    <th>Select</th>
                                    <th>Description</th>
                                    <th>Amount</th>
                                    <th>Due Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Hardcoded data -->
                                <tr>
                                    <td><input type="checkbox" name="selectedFees" value="1" data-amount="100.00"></td>
                                    <td>Monthly HOA Fee</td>
                                    <td>$100.00</td>
                                    <td>2023-11-15</td>
                                </tr>
                                <tr>
                                    <td><input type="checkbox" name="selectedFees" value="2" data-amount="500.00"></td>
                                    <td>Annual Maintenance Fee</td>
                                    <td>$500.00</td>
                                    <td>2023-12-01</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Service/Booking Fees Table -->
                    <p class="fs-5 mb-1">Service/Booking Fees</p>
                    <div class="table-responsive">
                        <table class="table table-striped fee-table">
                            <thead>
                                <tr>
                                    <th>Select</th>
                                    <th>Description</th>
                                    <th>Amount</th>
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Hardcoded data -->
                                <tr>
                                    <td><input type="checkbox" name="selectedFees" value="3" data-amount="50.00"></td>
                                    <td>Clubhouse Booking Fee</td>
                                    <td>$50.00</td>
                                    <td>2023-11-10</td>
                                </tr>
                                <tr>
                                    <td><input type="checkbox" name="selectedFees" value="4" data-amount="30.00"></td>
                                    <td>Swimming Pool Maintenance Fee</td>
                                    <td>$30.00</td>
                                    <td>2023-11-12</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Right Column: Payment Form -->
                <div class="col-md-5"> <!-- Reduced width for payment form -->
                    <div class="payment-form bg-light p-4 rounded">
                        <h3>Payment Details</h3>
                        <form method="post">
                            <div class="mb-3">
                                <label for="totalAmount" class="form-label">Total Amount to Pay</label>
                                <input type="text" class="form-control" id="totalAmount" readonly>
                            </div>
                            <div class="mb-3">
                                <label for="paymentMethod" class="form-label">Payment Method</label>
                                <select class="form-select" id="paymentMethod">
                                    <option value="creditCard">Credit Card</option>
                                    <option value="debitCard">Debit Card</option>
                                    <option value="paypal">PayPal</option>
                                    <option value="bankTransfer">Bank Transfer</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="cardNumber" class="form-label">Card Number</label>
                                <input type="text" class="form-control" id="cardNumber" placeholder="Enter card number">
                            </div>
                            <div class="mb-3">
                                <label for="expiryDate" class="form-label">Expiry Date</label>
                                <input type="text" class="form-control" id="expiryDate" placeholder="MM/YY">
                            </div>
                            <div class="mb-3">
                                <label for="cvv" class="form-label">CVV</label>
                                <input type="text" class="form-control" id="cvv" placeholder="CVV">
                            </div>
                            <button type="submit" class="btn btn-primary">Submit Payment</button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Recent Billing Transactions -->
            <div class="row justify-content-center">
                <div class="col-11">
                    <p class="fs-5 mb-1">Recent Billing Transactions</p>
                    <div class="table-responsive">
                        <table class="table table-striped fee-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Description</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Hardcoded data -->
                                <tr>
                                    <td>2023-11-01</td>
                                    <td>Monthly HOA Fee</td>
                                    <td>$100.00</td>
                                    <td>Paid</td>
                                </tr>
                                <tr>
                                    <td>2023-10-01</td>
                                    <td>Monthly HOA Fee</td>
                                    <td>$100.00</td>
                                    <td>Paid</td>
                                </tr>
                                <tr>
                                    <td>2023-09-01</td>
                                    <td>Monthly HOA Fee</td>
                                    <td>$100.00</td>
                                    <td>Paid</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

<style>
    /* Custom CSS for improved table design */
    .fee-table {
        width: 100%;
        margin: 0 auto; /* Center the table */
        border-collapse: separate;
        border-spacing: 0;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .fee-table th,
    .fee-table td {
        padding: 12px;
        text-align: left;
    }

    .fee-table th {
        background-color: #3c6693;
        color: white;
        font-weight: bold;
    }

    .fee-table tbody tr:nth-child(odd) {
        background-color: #f8f9fa;
    }

    .fee-table tbody tr:hover {
        background-color: #e9ecef;
    }

    .payment-form {
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .payment-form h3 {
        margin-bottom: 20px;
        color: #3c6693;
    }

    .payment-form .btn-primary {
        background-color: #3c6693;
        border-color: #3c6693;
    }

    .payment-form .btn-primary:hover {
        background-color: #2a4a6e;
        border-color: #2a4a6e;
    }
</style>

@section Scripts {
    <script>
        // Calculate total amount to pay
        const checkboxes = document.querySelectorAll('input[name="selectedFees"]');
        const totalAmountInput = document.getElementById('totalAmount');

        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                let total = 0;
                checkboxes.forEach(cb => {
                    if (cb.checked) {
                        const amount = parseFloat(cb.getAttribute('data-amount'));
                        total += amount;
                    }
                });
                totalAmountInput.value = total.toFixed(2);
            });
        });
    </script>
}